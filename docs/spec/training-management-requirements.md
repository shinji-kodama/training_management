# 研修管理システム 要件定義書

## 概要

IT技術研修を提供する企業が、研修コースの管理から実際の研修実施、受講者の進捗管理、個別面談・定例会の管理までを一元化できるWebアプリケーション。研修提供者（管理者、研修担当者、研修講師）が効率的に研修を運営し、受講者の学習をサポートするためのシステム。

## ユーザストーリー

### ストーリー1: ユーザー管理

- **である** 管理者 **として**
- **私は** 研修提供者のアカウントを管理 **をしたい**
- **そうすることで** 適切な権限でシステムを安全に運用できる

### ストーリー2: 教材管理

- **である** 研修担当者 **として**
- **私は** 研修で使用する教材を体系的に管理 **をしたい**
- **そうすることで** 効果的な研修コンテンツを提供できる

### ストーリー3: 研修コース設計

- **である** 研修担当者 **として**
- **私は** 教材を組み合わせた研修コースを設計 **をしたい**
- **そうすることで** 受講者のレベルに応じた学習プログラムを提供できる

### ストーリー4: 研修実施管理

- **である** 研修担当者 **として**
- **私は** 実際の研修実施状況を管理 **をしたい**
- **そうすることで** 複数の研修を並行して効率的に運営できる

### ストーリー5: 個別面談管理

- **である** 研修担当者 **として**
- **私は** 受講者との個別面談を計画・実施・記録 **をしたい**
- **そうすることで** 受講者の学習進捗を把握し適切なサポートを提供できる

### ストーリー6: 定例会運営

- **である** 研修講師 **として**
- **私は** 定期的な技術講義や進捗確認の場を運営 **をしたい**
- **そうすることで** 受講者の疑問解決と学習継続をサポートできる

### ストーリー7: 教材閲覧

- **である** 研修受講者 **として**
- **私は** 研修で使用する教材を自由に閲覧 **をしたい**
- **そうすることで** 自主的な学習を進めることができる

### ストーリー8: 企業管理

- **である** 管理者 **として**
- **私は** 研修提供先企業の情報を管理 **をしたい**
- **そうすることで** 企業ごとの研修状況を把握し適切なサービスを提供できる

### ストーリー9: 受講者管理

- **である** 研修担当者 **として**
- **私は** 各企業の受講者情報を管理 **をしたい**
- **そうすることで** 受講者に合わせた研修運営ができる

## 機能要件（EARS記法）

### 通常要件

- REQ-001: システムは メールアドレスとパスワードによるログイン機能を提供 しなければならない
- REQ-002: システムは ユーザーの役割（管理者、研修担当者、研修講師）に基づいたアクセス制御を実施 しなければならない
- REQ-003: システムは 教材のタイトル、URL、説明、おすすめ度を管理 しなければならない
- REQ-004: システムは 教材のURLからドメインを自動抽出して保存 しなければならない
- REQ-005: システムは 研修コースに複数の教材を紐付け しなければならない
- REQ-006: システムは 研修コースの取り組み期間を教材ごとに設定 しなければならない
- REQ-007: システムは 研修実施プロジェクトの開始日・終了日・参加者を管理 しなければならない
- REQ-008: システムは 個別面談の予約・実施・記録を管理 しなければならない
- REQ-009: システムは 定例会の日時・参加者・繰り返し設定を管理 しなければならない
- REQ-010: システムは 研修提供先企業の情報を管理 しなければならない
- REQ-011: システムは 受講者の名前、メールアドレス、所属組織、役割タイプを管理 しなければならない
- REQ-012: システムは 研修コースの受講前提条件、ゴール、完了条件を管理 しなければならない
- REQ-013: システムは 面談記録をMarkdown形式で入力・保存 しなければならない
- REQ-014: システムは 定例会の研修記録を管理 しなければならない

### 条件付き要件

- REQ-101: ユーザーが管理者である場合、システムは ユーザーの登録・編集・削除機能を提供 しなければならない
- REQ-102: ユーザーが管理者または研修担当者である場合、システムは 教材の登録・編集・削除機能を提供 しなければならない
- REQ-103: ユーザーが管理者または研修担当者である場合、システムは 研修コースの登録・編集・削除機能を提供 しなければならない
- REQ-104: 研修コースが企業に紐付けられていない場合、システムは 非ログインユーザーにも閲覧を許可 しなければならない
- REQ-105: 研修コースが企業に紐付けられている場合、システムは ログインユーザーのみに閲覧を許可 しなければならない
- REQ-106: ユーザーが非ログインの場合、システムは 教材のおすすめ度を非表示 にしなければならない
- REQ-107: 全個別面談が実施済みかつ全面談完了フラグがOFFの場合、システムは 受講者にアラートを表示 しなければならない
- REQ-108: 面談記録入力時に全面談完了フラグがOFFの場合、システムは 次回面談設定を促す表示 しなければならない
- REQ-109: 定例会が毎週・隔週で設定されている場合、システムは 指定された曜日・時間で繰り返しスケジュールを生成 しなければならない
- REQ-110: 企業に関連する受講者が存在する場合、システムは 企業情報の削除前に警告を表示 しなければならない

### 状態要件

- REQ-201: 面談が予約状態にある場合、システムは 面談日時と参加者情報を保持 しなければならない
- REQ-202: 面談が実施状態にある場合、システムは 面談記録と完了フラグを管理 しなければならない
- REQ-203: 定例会が繰り返し設定されている場合、システムは 終了条件まで自動でスケジュールを生成 しなければならない

### オプション要件

- REQ-301: システムは Googleカレンダーとの連携機能を提供 してもよい
- REQ-302: システムは 研修進捗の分析レポート機能を提供 してもよい
- REQ-303: システムは 複数プロジェクトを束ねたプログラム管理機能を提供 してもよい

### 制約要件

- REQ-401: システムは Rust言語とLoco.rsフレームワークで実装 しなければならない
- REQ-402: システムは PostgreSQLデータベースを使用 しなければならない
- REQ-403: システムは 個別面談を1対1でのみ実施 しなければならない
- REQ-404: システムは 研修実施プロジェクトに単一の実施組織のみを紐付け しなければならない
- REQ-405: システムは 研修コースに単一またはnullの企業のみを紐付け しなければならない
- REQ-406: システムは Loco.rsのView機能とHTMXを使用したモノリシック構成で実装 しなければならない
- REQ-407: システムは セッションベースの認証機能を実装 しなければならない
- REQ-408: システムは 外部キャッシュDBを使用せずデータベースのみでデータを管理 しなければならない

## 非機能要件

### パフォーマンス

- NFR-001: システムは 通常の画面操作に対して2秒以内でレスポンスを返す しなければならない
- NFR-003: システムは 同時接続ユーザー数100人まで対応 しなければならない

### セキュリティ

- NFR-101: システムは パスワードをハッシュ化して保存 しなければならない
- NFR-102: システムは セッションベースの認証機能を実装 しなければならない
- NFR-103: システムは SQLインジェクション攻撃を防御 しなければならない
- NFR-104: システムは CSRF攻撃を防御 しなければならない
- NFR-105: システムは 必要に応じたHTMX使用時に適切なセキュリティヘッダーを設定 しなければならない

### ユーザビリティ

- NFR-201: システムは 直感的で分かりやすいユーザーインターフェースを提供 しなければならない
- NFR-202: システムは モバイルデバイスでも利用可能なレスポンシブデザインを実装 しなければならない
- NFR-203: システムは エラーメッセージをユーザーが理解しやすい形で表示 しなければならない
- NFR-204: システムは 必要最小限のHTMXを使用した軽量なUI改善を提供 しなければならない
- NFR-205: システムは 基本的なサーバーサイドレンダリングで安定したUI操作を提供 しなければならない

### 可用性

- NFR-301: システムは 99%以上の稼働率を維持 しなければならない
- NFR-302: システムは 定期的なデータバックアップを実施 しなければならない

### 拡張性

- NFR-401: システムは Docker環境での展開をサポート しなければならない
- NFR-402: システムは AWS RDS、ECS環境での運用をサポート しなければならない
- NFR-403: システムは 将来的な機能拡張に対応できるモジュラー設計を採用 しなければならない
- NFR-404: システムは モノリシック構成でサーバーサイドレンダリングを中心としたView設計を採用 しなければならない

## Edgeケース

### エラー処理

- EDGE-001: 不正なURLが教材に登録された場合、システムはエラーメッセージを表示し登録を拒否する
- EDGE-002: 存在しない教材が研修コースに紐付けられた場合、システムは整合性エラーを表示する
- EDGE-003: 面談日時が過去の日付で設定された場合、システムは警告メッセージを表示する
- EDGE-004: 研修期間外の日付で面談が設定された場合、システムは確認ダイアログを表示する
- EDGE-006: 必要に応じたHTMXリクエストが失敗した場合、システムはユーザーに適切なフィードバックを表示する
- EDGE-007: セッションが無効な状態で保護されたページにアクセスした場合、システムはログインページにリダイレクトする

### 境界値

- EDGE-101: 教材のおすすめ度が1-5の範囲外で設定された場合、システムは範囲エラーを表示する
- EDGE-102: 研修コースに教材が0件紐付けられた場合、システムは警告メッセージを表示する
- EDGE-103: 面談記録が50,000文字を超える場合、システムは文字数制限エラーを表示する
- EDGE-104: 企業名が255文字を超える場合、システムは文字数制限エラーを表示する

### 同時アクセス

- EDGE-201: 同一データが複数ユーザーに同時編集された場合、システムは楽観的ロックによる競合制御を実施する
- EDGE-202: 面談予約が重複した場合、システムは競合エラーを表示し予約を拒否する

### データ整合性

- EDGE-301: 企業削除時に関連する受講者が存在する場合、システムは削除前に確認ダイアログを表示する
- EDGE-302: 研修コース削除時に関連するプロジェクトが存在する場合、システムは削除を拒否する
- EDGE-303: ユーザー削除時に関連する面談記録が存在する場合、システムは匿名化処理を実施する

### 業務フロー

- EDGE-401: 研修期間が終了した定例会の繰り返し設定が存在する場合、システムは自動的に繰り返しを停止する
- EDGE-402: 無効な企業IDが研修コースに紐付けられた場合、システムは整合性エラーを表示し保存を拒否する
- EDGE-403: 同一時間帯に複数の面談が予約された場合、システムは時間競合エラーを表示する
- EDGE-404: Markdown形式以外のテキストが面談記録に入力された場合、システムは形式変換またはエラー表示を行う

## 受け入れ基準

### 機能テスト

#### 認証・認可
- [ ] 正しいメールアドレスとパスワードでログインできる
- [ ] 不正な認証情報でログインが拒否される
- [ ] セッションベースの認証が正常に機能する
- [ ] 管理者のみがユーザー管理画面にアクセスできる
- [ ] 研修担当者が教材管理機能を利用できる
- [ ] 研修講師が定例会設定機能を利用できる
- [ ] セッションの有効期限が適切に管理される

#### 教材管理
- [ ] 教材の登録・編集・削除ができる
- [ ] URLからドメインが自動抽出される
- [ ] おすすめ度が1-5の範囲で設定できる
- [ ] 非ログインユーザーは教材を閲覧できるがおすすめ度は見えない

#### 研修コース管理
- [ ] 研修コースの登録・編集・削除ができる
- [ ] 複数の教材を紐付けできる
- [ ] 教材ごとに取り組み期間を設定できる
- [ ] 企業紐付けによる閲覧制御が機能する

#### 研修実施管理
- [ ] 研修プロジェクトの登録・編集・削除ができる
- [ ] 参加者の登録・管理ができる
- [ ] 受講者の進捗状況が確認できる

#### 面談管理
- [ ] 個別面談の予約ができる
- [ ] 面談記録をMarkdown形式で入力できる
- [ ] 全面談完了フラグの設定ができる
- [ ] 次回面談の設定ができる
- [ ] アラート表示が適切に機能する

#### 定例会管理
- [ ] 定例会の設定ができる
- [ ] 繰り返し設定が機能する
- [ ] 終了条件による自動終了が機能する
- [ ] 研修講師の任意参加設定ができる

#### 企業管理
- [ ] 企業の登録・編集・削除ができる
- [ ] 企業情報（名前、担当者、連絡先、チャットリンク）を管理できる
- [ ] 企業に所属する受講者一覧を表示できる

#### 受講者管理
- [ ] 受講者の登録・編集・削除ができる
- [ ] 受講者の役割タイプ（受講者、企業側管理者）を設定できる
- [ ] 受講者の研修履歴を確認できる

### 非機能テスト

#### パフォーマンス
- [ ] 通常操作で2秒以内にレスポンスが返る
- [ ] 100人同時接続でも正常動作する

#### セキュリティ
- [ ] パスワードがハッシュ化されて保存される
- [ ] セッション管理が適切に機能する
- [ ] SQLインジェクション攻撃が防御される
- [ ] CSRF攻撃が防御される

#### ユーザビリティ
- [ ] 直感的なユーザーインターフェースが提供される
- [ ] モバイルデバイスで適切に表示される
- [ ] エラーメッセージが分かりやすく表示される

#### 可用性
- [ ] システムが安定して稼働する
- [ ] データバックアップが正常に実行される

### エラーハンドリングテスト
- [ ] 不正なURL入力時に適切なエラーメッセージが表示される
- [ ] 境界値外の入力時に適切な検証エラーが表示される
- [ ] 同時編集時の競合制御が正常に機能する
- [ ] データ削除時の整合性チェックが機能する
- [ ] 定例会の繰り返し設定が正常に終了する
- [ ] Markdown形式の面談記録が正しく保存・表示される
- [ ] 必要に応じたHTMXリクエストのエラーが適切にハンドリングされる
- [ ] セッションタイムアウトが正常に機能する

### インフラテスト
- [ ] Docker環境での正常な起動・動作が確認できる
- [ ] AWS環境でのデプロイメントが正常に完了する
- [ ] データベースバックアップ・リストアが正常に機能する

### UI/UXテスト
- [ ] 必要最小限のHTMXを使用した軽量なUI改善が正常に動作する
- [ ] 基本的なサーバーサイドレンダリングによる安定したUI操作が完了する
- [ ] モノリシックアプリケーションがサーバーサイドレンダリング中心のViewで構成されている
- [ ] サーバーサイドレンダリングでパフォーマンスが最適化されている

## 要件トレーサビリティ

| 要件ID | ユーザストーリー | 機能 | 画面 | テストケース |
|--------|------------------|------|------|--------------|
| REQ-001 | ストーリー1 | ログイン機能 | ログイン画面 | 認証テスト |
| REQ-002 | ストーリー1 | 権限管理 | 全画面 | 認可テスト |
| REQ-003-004 | ストーリー2 | 教材管理 | 教材管理画面 | 教材管理テスト |
| REQ-005-006 | ストーリー3 | 研修コース管理 | 研修管理画面 | 研修管理テスト |
| REQ-007 | ストーリー4 | プロジェクト管理 | プロジェクト管理画面 | プロジェクト管理テスト |
| REQ-008 | ストーリー5 | 面談管理 | 面談管理画面 | 面談管理テスト |
| REQ-009 | ストーリー6 | 定例会管理 | 定例会設定画面 | 定例会管理テスト |
| REQ-010 | ストーリー8 | 企業管理 | 企業管理画面 | 企業管理テスト |
| REQ-011 | ストーリー9 | 受講者管理 | 受講者管理画面 | 受講者管理テスト |
| REQ-012 | ストーリー3 | 研修条件管理 | 研修管理画面 | 研修条件テスト |
| REQ-013 | ストーリー5 | Markdown記録 | 面談記録画面 | Markdown機能テスト |
| REQ-014 | ストーリー6 | 定例会記録 | 定例会画面 | 定例会記録テスト |

## 制約事項とスコープ外機能

### スコープ外機能（将来実装予定）
- **PDF出力機能**: 研修コースのPDF形式での出力
- **ファイルストレージ機能**: ファイルのアップロード・ダウンロード機能
- **Googleカレンダー連携**: 面談・定例会のカレンダー自動登録
- **受講者向けアプリケーション**: 受講者が使用する別アプリ
- **プログラム管理機能**: 複数プロジェクトを束ねた管理
- **進捗分析機能**: 詳細なレポートと分析機能

### 現在の制約事項
- システムは単一のPostgreSQLデータベースのみを使用
- ファイルのアップロード・保存機能は提供しない
- 外部API連携機能は提供しない

---

**作成日**: 2025-01-17  
**作成者**: システム要件分析  
**承認者**: [承認者名]  
**バージョン**: 1.1 (PDF機能スコープ外化)